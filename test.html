function toggleVisibility() {
  const element = document.getElementById("myElement");
  if (element.style.display === "block") {
    element.style.opacity = "0";
    setTimeout(() => element.style.display = "none", 300);
  } else {
    element.style.display = "block";
    element.style.opacity = "0";
    setTimeout(() => element.style.opacity = "1", 10);
  }
}

// chatbot
const toggleBtn = document.getElementById("chatbot-toggle");
const chatPopup = document.getElementById("chatbot-popup");
const closeBtn = document.getElementById("chatbot-close");
const sendBtn = document.getElementById("send-btn");
const userInput = document.getElementById("user-input");
const chatBody = document.getElementById("chat-body");
const quickBtns = document.querySelectorAll(".quick-btn");

// toggle open/close
toggleBtn.addEventListener("click", () => {
  chatPopup.style.display = chatPopup.style.display === "flex" ? "none" : "flex";
});

closeBtn.addEventListener("click", () => {
  chatPopup.style.display = "none";
});

// function to add messages
function addMessage(message, sender) {
  const msgDiv = document.createElement("div");
  msgDiv.classList.add(sender === "user" ? "user-msg" : "bot-msg");
  msgDiv.innerText = message;
  chatBody.appendChild(msgDiv);
  chatBody.scrollTop = chatBody.scrollHeight; // always scroll to bottom
}

// function for bot replies
function botReply(message) {
  const lower = message.toLowerCase();
  let reply = "";

  if (lower.includes("shipping")) reply = "We ship worldwide! Orders usually arrive within 5â€“7 days.";
  else if (lower.includes("return")) reply = "You can return your items within 30 days of purchase.";
  else if (lower.includes("pride")) reply = "Our Pride Collection celebrates inclusivity and love for all.";
  else if (lower.includes("sustain")) reply = "We focus on eco-friendly and sustainable products.";
  else if (lower === "ok") reply = "Thank you for confirming!";
  else reply = "Sorry, I do not understand your message.";

  addMessage(reply, "bot");
}

// send message
sendBtn.addEventListener("click", () => {
  const message = userInput.value.trim();
  if (message) {
    addMessage(message, "user");
    userInput.value = "";
    setTimeout(() => botReply(message), 600);
  }
});

// quick question clicks
quickBtns.forEach(btn => {
  btn.addEventListener("click", () => {
    const text = btn.innerText;
    addMessage(text, "user");
    setTimeout(() => botReply(text), 500);
  });
});
